!function(t){function e(e){for(var o,a,s=e[0],c=e[1],u=e[2],p=0,f=[];p<s.length;p++)a=s[p],r[a]&&f.push(r[a][0]),r[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);for(l&&l(e);f.length;)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},r={0:0},i=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;i.push([151,1]),n()}({141:function(t,e,n){},142:function(t,e,n){},143:function(t,e,n){},144:function(t,e,n){},145:function(t,e,n){},146:function(t,e,n){},147:function(t,e,n){},148:function(t,e,n){},151:function(t,e,n){"use strict";n.r(e);var o=n(9),r=n(50),i=n(68),a=n(127),s=(n(137),n(19)),c=n.n(s),u="INIT";var l="ACTN_SET_CON_STACK";var p="ACTN_SET_LOADSCRN_TASKS";var f="ACTN_REFRESH_LOADSCRN_TASKS";var d="ACTN_FINISH_LOADSCRN_TASKS";var h="GEVT_START_GAME",b="GEVT_START_COUNTDOWN",y="GEVT_RESET_COUNTDOWN",m={},g="EVT_TITLEANIM_OFF",w={EVT_SET_LOADSCRN_TASKS:function(t){return{type:p,payload1:t[0],payload2:t[1]}},EVT_REFRESH_LOADSCRN_TASKS:function(t){return{type:f,payload1:t[0],payload2:t[1]}},EVT_FINISH_LOADSCRN_TASKS:function(){return{type:d}}},v={EVT_SET_CON_STACK:function(t){return{type:l,payload:t}}};function O(t){this.self=t,this.oKeyboardEvtRdyCpntHandlers=Object.create(null)}O.prototype.setConstack=function(t){var e=!1;if("string"!=typeof t)return console.warn("setConstack:",t,"not a valid constack value. returning with no changes."),this;for(var n=0;n<this.self.length;n++)if(this.self[n]===t){if(n===this.self.length-1)return;e=!0,this.self.length=n+1}e||this.self.push(t),this.syncReduxConstack()},O.prototype.resetConstack=function(){this.self=this.self.slice(0,this.self.length-1),this.syncReduxConstack()},O.prototype.syncReduxConstack=function(){c.a.publish("EVT_SET_CON_STACK",this.self.slice())},O.prototype.processKeyboardEvent=function(t,e,n){var o=this.oKeyboardEvtRdyCpntHandlers;n&&o[t+"_KEYUP"]?o[t+"_KEYUP"](e):!n&&o[t]&&o[t](e)},O.prototype.setKeyboardEventHandler=function(t,e,n){var o=this.oKeyboardEvtRdyCpntHandlers;"function"==typeof e?n?o[t+"_KEYUP"]=e:o[t]=e:(o[t]&&delete o[t],o[t+"_KEYUP"]&&delete o[t+"_KEYUP"])};var S=O,E=n(61),j=n.n(E),T=n(128),A=n.n(T),_=n(27),C=n(93),N=n(132),x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V=A()(_,C,N),k=function t(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(n){!e.hasOwnProperty(n)||null===e[n]||"object"!==x(e[n])&&"function"!=typeof e[n]||Object.isFrozen(e[n])||t(e[n])}),e},M=function(){},I=function(t,e){return t.fernTaskComplete=!1,t.fernTaskName=e,t.then(function(){t.fernTaskComplete=!0}),t.catch(function(n){t.fernTaskComplete=null,console.warn("TrackablePromise catch triggered",e,n)}),t.finally(function(){c.a.publish("EVT_REFRESH_LOADSCRN_TASKS",[e,t.fernTaskComplete])}),t},R=function(t,e){var n=new j.a(t);return n=I(n,e)};"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null===t||void 0===t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),o=1;o<arguments.length;o++){var r=arguments[o];if(null!==r&&void 0!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},writable:!0,configurable:!0});var L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function D(){console.warn("this should not ever show. it means we completed a task and called a placeholder callback")}var P,G="LOADSCRN_TASKS",B="LOADSCRN_STATUS",U="SYS_CON_STACK",F="shakecharger",K="cord",H=function(t,e){return"string"==typeof t&&-1!=t.indexOf(e)}.bind(null,void 0)("skiptitle"),Y=H?["GAMELAYER"]:["GAMELAYER","TITLEMENU"],z=new S(Y),q=new function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isPromiseCheck=function(t){return null!==t&&"object"===(void 0===t?"undefined":L(t))&&"function"==typeof t.then},this.setTaskArray=function(t,e){this.self.length?console.error("tried to load something even though we're loading something already"):t.length<1&&console.warn("tried to load empty task array");for(var n=t.length-1;n>=0;n--)"function"==typeof t[n]&&2===t[n].length?t[n]=this.getTaskFromFunctionInternal(t[n]):this.isPromiseCheck(t[n])?void 0===t[n].fernTaskComplete?t[n]=this.getTaskFromPromiseInternal(t[n]):void 0===t[n].fernHasLoadScrnFinisher&&(t[n]=this.setLoadScrnFinisher(t[n])):console.error();return this.self=t,this.tasksFinishedCallback=e,this},this.setLoadScrnFinisher=function(t){var e=this;return t.then(function(){e.allTasksDone()&&c.a.publish("EVT_FINISH_LOADSCRN_TASKS","")}),t.fernHasLoadScrnFinisher=!0,t},this.allTasksDone=function(){if(this.self.length<1)return!1;for(var t=0;t<this.self.length;t++)if(!this.self[t].fernTaskComplete)return!1;return!0},this.clearAll=function(){return this.tasksFinishedCallback(),this.tasksFinishedCallback=D,this.self=[],this.statuses=Object.create(null),this},this.getTaskFromFunctionInternal=function(t){var e=R(t,t.name);return e=this.setLoadScrnFinisher(e)},this.getTaskFromPromiseInternal=function(t){return this.isPromiseCheck(t)?(t=I(t,"Promise"+Date.now()),t=this.setLoadScrnFinisher(t)):null},this.getUpdatedStatus=function(t,e){return this.statuses[t]=e,this.statuses},this.self=[],this.statuses=Object.create(null),this.tasksFinishedCallback=D},W=((P={})[U]=Y,P[G]=q,P[B]={},P);n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148);var X=n(28),Z=n(130);var J=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.name=n.name||Date.now().toString(32),o.type=n.type||"fade",o.speed=n.speed||1e3,o.onAppear=n.onAppear||M,o.onAway=n.onAway||M,o.transitionEndEvents=null,o.constackDependant=void 0===n.active,o.state={show:n.active||!1},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.name;!this.node||this.onAppear==M&&this.onAway==M||(this.transitionEndEvents=Object(Z.a)("transitionend",this.node).filter(function(t){return!!t.target&&t.target.id==e}),this.transitionEndEvents.observe(function(e){t.state.show?t.onAppear():t.onAway()}))},e.prototype.componentWillReceiveProps=function(t){var e=t.active;!1===this.constackDependant&&(e!=this.state.show&&(!0===e?this.show():this.hide()))},e.prototype.show=function(){this.setState({show:!0})},e.prototype.hide=function(){this.setState({show:!1})},e.prototype.render=function(){var t=this;return Object(o.createVNode)(1,"div","aniBase aniBase"+this.speed+"ms"+(this.props.classes?" "+this.props.classes:""),this.props.children,0,{id:this.name,"data-type":this.type,"data-activeByReactProps":this.state.show},null,function(e){t.node=e})},e}(X.a);var Q=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.arrConstacked=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setConstackedLayer=function(t,e){if("GAMELAYER"!==t)for(var n=document.getElementById(t);n&&n.parentElement&&"ui-layer"!==n.id;)n.classList.add("activeByConstack"),n.classList.add("constacked"+e),this.arrConstacked[e].push(n),n=n.parentElement},e.prototype.setConstackBreadCrumbs=function(){for(var t=this.props.arrControlStack,e=0;e<t.length;e++)this.setConstackedLayer(t[e],e)},e.prototype.unsetConstackBreadCrumbs=function(){for(var t=0;t<this.arrConstacked.length;t++){for(var e=0;e<this.arrConstacked[t].length;e++)this.arrConstacked[t][e].classList.remove("activeByConstack"),this.arrConstacked[t][e].classList.remove("constacked"+t);this.arrConstacked[t].length=0}},e.prototype.componentDidMount=function(){this.setConstackBreadCrumbs()},e.prototype.componentDidUpdate=function(){this.unsetConstackBreadCrumbs(),this.setConstackBreadCrumbs()},e.prototype.render=function(){return Object(o.createVNode)(1,"div",null,[Object(o.createComponentVNode)(2,ce),Object(o.createComponentVNode)(2,ae),Object(o.createComponentVNode)(2,se),Object(o.createComponentVNode)(2,ie),Object(o.createVNode)(1,"div","hud",[Object(o.createVNode)(1,"div","top-row",[Object(o.createComponentVNode)(2,le,{bShowID:!0}),Object(o.createComponentVNode)(2,he)],4),Object(o.createVNode)(1,"div","btm-row",[Object(o.createComponentVNode)(2,ue),Object(o.createComponentVNode)(2,ht)],4)],4),Object(o.createComponentVNode)(2,$t),Object(o.createComponentVNode)(2,re),Object(o.createComponentVNode)(2,Zt)],4,{id:"ui-layer","data-control-stack":this.props.arrControlStack.join(" "),"data-control-stack-last":this.props.arrControlStack[this.props.arrControlStack.length-1]})},e}(X.a),$=Object(r.b)(function(t){return{arrControlStack:t[U]}})(Q),tt=n(8),et=(n(149),n(150),n(129)),nt=n.n(et),ot=n(17),rt=n(133),it=n(55),at=n(0),st=n(107),ct=n(131),ut=n(106),lt=["bgm_ingame","uisfx_ready","uisfx_go","uisfx_timer3","uisfx_timer2","uisfx_timer1","gmsfx_cannoncharge","gmsfx_cannonfire","gmsfx_groundhit"];function pt(){this.body={}}pt.prototype.loadBatch=function(t,e){var n=this.body;return t.map(function(t){return R(function(o,r){if(Array.isArray(n[t])){var i=n[t];n[t]=new ut.a(t,i[0],e,function(){o(!0)},{loop:!1,autoplay:!1})}else n[t]&&n[t].constructor===ut.a?1==n[t]._isReadyToPlay?o(!0):console.log("still loading sound wait"):(o(!0),console.warn("undefined or invalid sound template for:",t,n[t]))},"FernAudioManager.loadBatch_BABYLON.Sound_"+(Array.isArray(n[t])?n[t][0]+"   ":"")+t)})},pt.prototype.playSound=function(t){Array.isArray(this.body[t])||1==this.body[t]._isReadyToPlay&&("function"!=typeof this.body[t].play?console.error("tried to play",t,"but loaded sound obj has no play method"):this.body[t].play())};var ft={timerStarted:!1,gamePaused:!1,zeroTime:!1,fired:!1,keydown:!1},dt=function(){if(!ft.fired&&ft.timerStarted&&!ft.zeroTime){ft.fired=!0;var t=document.getElementById("ui-layer");t&&t.setAttribute("data-cannonFired","true"),c.a.publish("GEVT_FIRE_CANNON")}},ht=function(){return Object(o.createVNode)(32,"svg","mouseOK",[Object(o.createVNode)(1,"defs",null,Object(o.createVNode)(1,"linearGradient",null,[Object(o.createVNode)(1,"stop",null,null,1,{offset:"0%","stop-color":"rgb(0,85,65)","stop-opacity":"0.4"}),Object(o.createVNode)(1,"stop",null,null,1,{offset:"50%","stop-color":"rgb(0,85,65)","stop-opacity":"0.6"}),Object(o.createVNode)(1,"stop",null,null,1,{offset:"100%","stop-color":"rgb(0,85,65)","stop-opacity":"0.4"})],4,{id:"Gradient2",x1:"0",x2:"0",y1:"0",y2:"1"}),2),Object(o.createVNode)(1,"rect",null,null,1,{x:"0%",width:"100%",height:"100%",rx:"5",ry:"5",fill:"url(#Gradient2)"}),Object(o.createVNode)(1,"text",null,Object(o.createTextVNode)("FIRE"),2,{x:"50%",y:"50%","dominant-baseline":"middle","text-anchor":"middle",fill:"white"})],4,{id:"chargemeter",onClick:dt,onTouchStart:M})};function bt(t){this.keyDownState=Object.create(null),this.sceneObj=t,this.paused=!1}bt.prototype.renderLoopFn=function(){},bt.prototype.pause=function(){ft.gamePaused=!0,this.sceneObj.engine.stopRenderLoop(),this.paused=!0},bt.prototype.unpause=function(){var t=this;ft.gamePaused=!1,this.sceneObj.engine.runRenderLoop(function(){t.sceneObj.self.render(),t.renderLoopFn()}),this.paused=!1};var yt=new bt,mt=function(){var t=document.getElementById("chargemeter");return k({Space:function(){!function(t){ft.keydown||t.classList.add("keyboardDown")}(t),dt()},KeyP:function(){yt.sceneObj&&(yt.paused||(yt.pause(),z.setConstack("PAUSESCRN")))},ArrowUp:function(){yt.keyDownState.ArrowUp=!0},ArrowDown:function(){yt.keyDownState.ArrowDown=!0},ArrowLeft:function(){yt.keyDownState.ArrowLeft=!0},ArrowRight:function(){yt.keyDownState.ArrowRight=!0}})};function gt(t,e){"function"==typeof t[e.code]&&t[e.code]()}function wt(t){this.canvasElement=t,this.engine=new tt.a(t,!0),this.engine.enableOfflineSupport=!1,this.self=new ot.a(this.engine),this.lighting=[],this.camera=null,this.fernAudioManager=new pt,this.self.enablePhysics(new at.q(0,0,0),new st.a)}window.CANNON=nt.a,tt.a.ShadersRepository="js/shaders/",wt.prototype.getCamera=function(t){var e=Math.PI/2,n=new rt.a("FollowCam",e,.2,10,t,this.self);return n.lowerAlphaLimit=e-5e-5,n.upperAlphaLimit=e+5e-5,n.lowerBetaLimit=.2-5e-5,n.upperBetaLimit=.20005,n.lowerRadiusLimit=10,n.upperRadiusLimit=10+5e-5,n.fov=.6,n.panningSensibility=0,n.detachControl(),n},wt.prototype.getLighting=function(){var t=new it.a("baseLighting",new at.q(1,2,5,this.self));return t.diffuse=new at.b(1,1,1),t.intensity=1,t.lightmapMode=ct.a.LIGHTMAP_SHADOWSONLY,[t]},wt.prototype.anim=function(){var t=this.self;yt.sceneObj=this,this.engine.runRenderLoop(function(){t.render(),yt.renderLoopFn()}),c.a.subscribe("EVT_RESIZE",function(t,e){this.engine.resize()}.bind(this));var e=mt.call(this),n=function(){var t=document.getElementById("chargemeter");return k({Space:function(){!function(t){t.classList.remove("keyboardDown")}(t)},ArrowUp:function(){yt.keyDownState.ArrowUp=!1},ArrowDown:function(){yt.keyDownState.ArrowDown=!1},ArrowLeft:function(){yt.keyDownState.ArrowLeft=!1},ArrowRight:function(){yt.keyDownState.ArrowRight=!1}})}.call(this);z.setKeyboardEventHandler("GAMELAYER",gt.bind(null,e)),z.setKeyboardEventHandler("GAMELAYER",gt.bind(null,n),!0)},wt.prototype.clearMap=function(){var t=this.self;if(this.engine)return this.engine.stopRenderLoop(),this.stars=null,t.dispose(),this.self=new ot.a(this.engine),this.self.enablePhysics(new at.q(0,0,0),new st.a),this.self;console.error("clearMap called even though there is no engine")};var vt=wt,Ot=n(134),St=n(12),Et=n(80),jt=n(37),Tt=n(23),At=n(13),_t=n(54),Ct=n(67),Nt=n(105),xt={x:window.innerWidth,y:window.innerHeight};function Vt(t,e){vt.call(this,t),this.distanceSpanEl=e,this.chargeX=0,this.chargeY=0,this.chargeActual=0,this.chargeMinimum=18,this.bgRs=[1,.56,.3,1,.2,.06,.01],this.bgGs=[1,.83,.52,.72,.27,.07,.04],this.bgBs=[1,1,.87,.57,.47,.21,.12]}Vt.prototype=Object.create(vt.prototype),Vt.prototype.constructor=Vt,Vt.prototype.loadMap=function(t){var e=this,n=this.self;n.meshes.length&&(n=this.clearMap()),this.lighting=this.getLighting(),this.self.clearColor=new at.b(1,1,1);new Ot.a("back","https://res.cloudinary.com/dmj8qtant/image/upload/v1561267619/boxgun/g.png",n,!0);var o=this.loadGeometry(),r=this.fernAudioManager.loadBatch(t,n);return j.a.all(r).then(function(t){return c.a.publish("AUDIO_MAP1_BGM"),"got sounds"}.bind(this)),j.a.all(o).then(function(t){e.anim();var o=function(t,o){var r,i,a,s=e.box.physicsImpostor.physicsBody.angularVelocity,u=e.box.physicsImpostor.physicsBody.velocity;u.x=-1*(e.chargeMinimum+e.chargeActual/500),u.y=e.chargeMinimum+e.chargeActual/500,e.self.getPhysicsEngine().setGravity(new at.q(0,-9.807,0)),a=n.beginWeightedAnimation(e.cameraTarget,0,10,1,!0);var l=window.setInterval(function(){u.y<1?a.weight=0:u.y<10?a.weight=.1:u.y<30?a.weight=.3:u.y<50?a.weight=.5:u.y<100?a.weight=.7:u.y<150&&(a.weight=.9),u.x>-1?(window.clearInterval(l),n.unregisterBeforeRender(p),window.setTimeout(function(){r=e.distanceSpanEl.textContent,c.a.publish("GEVT_END_GAME",r)},1e3)):e.box.position.y>250&&(e.box.position.y>1800?e.createStarAheadOfView(e.box.position.x,e.box.position.y,u.x,u.y):e.createCloudAheadOfView(e.box.position.x,e.box.position.y,u.x,u.y))},1e3),p=function(){e.ground.position.x=e.box.position.x,e.ground.position.z=e.box.position.z,e.distanceSpanEl.textContent=-1*e.box.position.x.toFixed(0),e.box.position.y<1e3?u.y=Math.max(-35,u.y):u.y=Math.max(-350,u.y),i||(e.box.position.y<1?(i=!0,u.y=10+e.chargeActual/5e3):(u.y<-5&&(s.z=.15),e.getSkyColorFromAltitude(e.box.position.y)))};n.registerBeforeRender(p)};return c.a.subscribe("GEVT_FIRE_CANNON",function(){c.a.publish("AUDIO_CANNON_CHARGE_AND_FIRE"),function(t,e){var n=new Tt.a("myAnimation","position.y",60,Tt.a.ANIMATIONTYPE_FLOAT,Tt.a.ANIMATIONLOOPMODE_CYCLE),o=[];o.push({frame:0,value:0}),e>6e3&&o.push({frame:5,value:Math.max(.1,.025*Math.floor(e/6e3))});o.push({frame:10,value:0}),n.setKeys(o),t.animations=[],t.animations.push(n)}(e.cameraTarget,e.chargeActual),window.setTimeout(o,1e3)}),"got geometry"}),o.concat(r)},Vt.prototype.loadGeometry=function(){var t=this.self;this.stars=this.createStarManager();var e=this.box=Et.a.CreateBox("box",{width:2},t);e.position.y=1.554,e.physicsImpostor=new jt.a(e,jt.a.BoxImpostor,{mass:1,restitution:0},t),e.rotationQuaternion.z=-Math.PI/8;var n=this.cameraTarget=St.a.CreateGround("ground1",10,.4,1,this.self);n.position.x=0,n.position.y=0,n.position.z=0,n.isVisible=!1,n.parent=e,this.camera=this.getCamera(n);var o=this.ground=St.a.CreateCylinder("detail",.01,22,22,16,16,t),r=new At.a("https://res.cloudinary.com/dmj8qtant/image/upload/v1561267618/boxgun/lightmap.png",t),i=new _t.a("ground",t);i.diffuseTexture=new At.a("https://res.cloudinary.com/dmj8qtant/image/upload/v1561267618/boxgun/diam.png",t),i.diffuseTexture.uScale=25,i.diffuseTexture.vScale=25,i.lightmapTexture=r,o.material=i,o.receiveShadows=!0,o.physicsImpostor=new jt.a(o,jt.a.BoxImpostor,{mass:0,restitution:0},t),o.physicsImpostor.registerOnPhysicsCollide(o.physicsImpostor,function(t,e){c.a.publish("AUDIO_GROUND_HIT")});for(var a=[],s=0;s<=6;s+=.1)a.push(new at.q(-.4*s-Math.sin(s),.01,.9*s-Math.sin(s)));var u=[];for(s=0;s<=6;s+=.1)u.push(new at.q(-.39*s-Math.sin(s),.01,.03+.9*s-Math.sin(s)));var l=[a,u],p=Et.a.CreateRibbon("helix",{pathArray:l},t),f=new _t.a("cord",t);f.diffuseColor=new at.b(.2,.2,.2),p.material=f;var d=Math.PI/3,h=.5/Math.tan(d),b=this.cone=Et.a.CreateCylinder("cone",{diameterBottom:0,diameterTop:1,height:h},t);return b.position.x=-.7,b.position.y=2.5,b.rotation.z=Math.PI/4,b.setPivotPoint(new at.q(0,-h/2,0)),b.material=new _t.a("mat",t),b.material.wireframe=!0,[["a","https://res.cloudinary.com/dmj8qtant/raw/upload/v1561267619/boxgun/","boxgun.glb"],["gun","https://res.cloudinary.com/dmj8qtant/raw/upload/v1561267618/boxgun/","a_boxgun2.glb"]].map(function(e){return R(function(n,o){Ct.a.ImportMesh(e[0],e[1],e[2],t,function(t){if(!t.length)return console.log("failed to load model: ",e[0],e[1],e[2]),void o();t.forEach(function(t,e){"gun"==t.name&&(t.rotationQuaternion.z=Math.PI/8)}),n(!0)},M,function(t){o(arguments[2])})},"Scene.loadGeometry_BABYLON.ImportMesh_"+e[1]+e[2]+"   "+e[0])}.bind(this))};var kt={acceptingCharge:!1};Vt.prototype.resetCrystalBounds=function(t){xt.x=window.innerWidth-t,xt.y=window.innerHeight-t},Vt.prototype.attachDraggerElement=function(t){var e=this,n=t.rect,o=t.cord,r=t.pwrLvl,i=t.crystalHeight,a=100,s=100;this.resetCrystalBounds(i),c.a.subscribe("EVT_RESIZE",function(t,e){this.resetCrystalBounds(i);var r=Math.min(a,xt.x),c=Math.min(s,xt.y),u=i/2;n&&(n.setAttribute("x",r),n.setAttribute("y",c),o.setAttribute("x1",(r+u+window.innerWidth/2)/2),o.setAttribute("x2",r+u),o.setAttribute("y2",c+u))}.bind(this)),V.select(n).call(V.drag().on("start",function(){window.ondevicemotion=function(t){null!=t&&t.accelerationIncludingGravity&&kt.acceptingCharge&&(e.chargeX+=1e5*Math.abs(t.accelerationIncludingGravity.x||0),e.chargeY+=1e5*Math.abs(t.accelerationIncludingGravity.y||0),e.chargeActual=Math.max(Math.round(e.chargeX),Math.round(e.chargeY)),n.setAttribute("data-charge",Math.min(10,Math.floor(e.chargeActual/1e4))),null!=r&&(r.textContent=e.chargeActual))}}).on("drag",function(){if(null!=n&&null!=o){var t=xt.x+i,c=a,u=s,l=Math.max(0,Math.min(c+V.event.dx,xt.x)),p=Math.max(0,Math.min(u+V.event.dy,xt.y)),f=l+i/2,d=p+i/2;a=l,s=p,n.setAttribute("x",l),n.setAttribute("y",p),o.setAttribute("x1",(f+t/2)/2),o.setAttribute("x2",f),o.setAttribute("y2",d),kt.acceptingCharge&&(e.chargeX+=Math.abs(V.event.dx/xt.x*1e3),e.chargeY+=Math.abs(V.event.dy/xt.y*1e3),e.chargeActual=Math.max(Math.round(e.chargeX),Math.round(e.chargeY)),n.setAttribute("data-charge",Math.min(10,Math.floor(e.chargeActual/1e4))),null!=r&&(r.textContent=e.chargeActual))}}).on("end",function(){window.ondevicemotion=null}))},Vt.prototype.getSkyColorFromAltitude=function(t){var e=this.self.clearColor,n=Math.floor(t/600);if(!(n>=this.bgRs.length-1)){var o=this.bgRs[n],r=this.bgRs[n+1],i=this.bgGs[n],a=this.bgGs[n+1],s=this.bgBs[n],c=this.bgBs[n+1],u=t%600/600;e.r=o+(r-o)*u,e.g=i+(a-i)*u,e.b=s+(c-s)*u}},Vt.prototype.createCloudAheadOfView=function(t,e,n,o){var r=this.self,i=50*Math.random(),a=Et.a.CreateBox("basecloud"+t,{height:4+i/(Math.random()+1.4),width:20+i,depth:30+i},r);a.visibility=.25,a.position.y=e+o/2,a.position.z=-40*i/4,a.position.x=t-n/2-Math.abs(a.position.z)-i,window.setTimeout(function(){a.dispose()},1e4)},Vt.prototype.createStarManager=function(){return new Nt.b("starManager","https://res.cloudinary.com/dmj8qtant/image/upload/v1561268416/boxgun/starsprites.png",20,{width:150,height:150},this.self)},Vt.prototype.createStarAheadOfView=function(t,e,n,o){var r=50*Math.random(),i=new Nt.a("player",this.stars);i.playAnimation(0,11,!0,100),i.position.y=e+o/2,i.position.z=-40*r,i.position.x=t-n/2-Math.abs(i.position.z)-r,i.size=2*Math.sqrt(r),window.setTimeout(function(){i.dispose()},1e4)};var Mt=Vt;var It="keyval-store",Rt=function(t){var e=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keyval";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storeName=n,this._dbp=new j.a(function(t,o){var r=indexedDB.open(e,1);r.onerror=function(){return o(r.error)},r.onsuccess=function(){return t(r.result)},r.onupgradeneeded=function(){r.result.createObjectStore(n)}})}return t.prototype._withIDBStore=function(t,e){var n=this;return this._dbp.then(function(o){return new j.a(function(r,i){var a=o.transaction(n.storeName,t);a.oncomplete=function(){return r()},a.onabort=a.onerror=function(){return i(a.error)},e(a.objectStore(n.storeName))})})},t}(),n=void 0;function o(){return n||(n=new e),n}return t.Store=e,t.get=function(t){var e=void 0;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:o())._withIDBStore("readonly",function(n){e=n.get(t)}).then(function(){return e.result})},t.set=function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:o())._withIDBStore("readwrite",function(n){n.put(e,t)})},t.del=function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:o())._withIDBStore("readwrite",function(e){e.delete(t)})},t.clear=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:o())._withIDBStore("readwrite",function(t){t.clear()})},t.keys=function(){var t=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:o())._withIDBStore("readonly",function(e){(e.openKeyCursor||e.openCursor).call(e).onsuccess=function(){this.result&&(t.push(this.result.key),this.result.continue())}}).then(function(){return t})},t}({}),Lt=function(t,e){console.log(e),t(!1)},Dt=function(t,e,n){!function(t,e,n){Rt.set(t,e).catch(Lt.bind(this,n))}("hiscore",t,function(t){t?(console.log("saved successfully"),e()):(console.log("failed to save"),n())})},Pt=function(t,e){!function(t,e){Rt.get(t).then(function(n){n?(console.log("got a truthy return for:",t,"->",n),e(n)):(console.log("got a falsey return for:",t),e(!1))}).catch(Lt.bind(this,e))}("hiscore",function(e){t(e||0)})};var Gt=[function(t,e){window.setTimeout(function(){t()},700)}],Bt=tt.a.isSupported(),Ut=function(t,e){function n(t){z.setConstack(e),r&&r.setAttribute("data-cannonFired","false"),t.chargeX=0,t.chargeY=0,t.chargeActual=0,i&&(i.textContent="0"),a&&(a.textContent="0"),s&&s.rect.setAttribute("data-charge","0"),c.a.publish(y),c.a.publish(g),c.a.publish(h,"Ready..."),c.a.publish("AUDIO_READY"),window.setTimeout(function(){c.a.publish(h,"Go!"),c.a.publish("AUDIO_GO"),window.setTimeout(function(){c.a.publish(h,"")},500),c.a.publish(b)},1e3)}var o=t||document.getElementById(e),r=document.getElementById("ui-layer"),i=document.getElementById("distspan"),a=document.getElementById("powerlevel"),s=function(t){var e=document.getElementById(F),n=document.getElementById(K);if(null==e||null==n)return;var o=e.querySelector("path"),r=e.querySelector("image"),i=e.querySelector("circle");o&&r&&i&&(o.setAttribute("d","M6,36 6,164     36,194 164,194    194,164 194,36    164,6 36,6  Z"),r.setAttribute("width",200..toString()),r.setAttribute("height",200..toString()),n.setAttribute("x2",200..toString()),n.setAttribute("y2",200..toString()),i.setAttribute("cx",100..toString()),i.setAttribute("cy",100..toString()));return{rect:e,cord:n,pwrLvl:t,crystalHeight:200}}(a);if(Bt)if(null!=o){var u=new Mt(o,i);u.attachDraggerElement(s),H&&(u.loadMap(lt),n(u)),c.a.subscribe("GEVT_RESET_GAME",function(t,e){var o=u.loadMap(lt);c.a.publish("EVT_SET_LOADSCRN_TASKS",[Gt.concat(o),n.bind(null,u)])}),c.a.subscribe("GEVT_BACK_TO_TITLE",function(t,e){u.engine.stopRenderLoop(),z.setConstack("TITLEMENU"),c.a.publish("EVT_TITLEANIM_ON")})}else console.error("Could not find <canvas> with ID:",e);else console.error("no WEBGL/BABYLONJS support")};var Ft=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){Ut(this.node,"GAMELAYER")},e.prototype.componentShouldUpdate=function(){return!1},e.prototype.componentWillUnmount=function(){},e.prototype.render=function(){var t=this;return Object(o.createVNode)(1,"canvas",null,null,1,{id:"GAMELAYER"},null,function(e){t.node=e})},e}(X.a);var Kt=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.handlers=function(){var t=this,e=Object.create(null);return e.onKeyDown=function(e){t.gameIsLoading||z.processKeyboardEvent(t.props.focusedElement,e)},e.onKeyUp=function(e){z.processKeyboardEvent(t.props.focusedElement,e,!0)},e}.call(o,o.props.dispatch),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){document.addEventListener("keydown",this.handlers.onKeyDown),document.addEventListener("keyup",this.handlers.onKeyUp),window.addEventListener("resize",function(t,e,n){var o;return function(){var r=this,i=arguments,a=n&&!o;clearTimeout(o),o=setTimeout(function(){o=null,n||t.apply(r,i)},e),a&&t.apply(r,i)}}(c.a.publish.bind(null,"EVT_RESIZE"),200),!1)},e.prototype.componentShouldUpdate=function(){return!1},e.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.handlers.onKeyDown),document.removeEventListener("keyup",this.handlers.onKeyUp)},e.prototype.render=function(){return Object(o.createVNode)(1,"div",null,null,1,{id:"controller-element"})},e}(X.a),Ht=Object(r.b)(function(t){return{focusedElement:t[U][t[U].length-1],gameIsLoading:t[G].self.length>0}})(Kt);var Yt=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.dispatch=o.props.dispatch,o.game_evts_ok=!1,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){var t=this;c.a.subscribe("SET_GAME_EVTS_OK",function(e,n){t.game_evts_ok=n});var e=function(e){c.a.subscribe(e,function(n,o){t.dispatch(w[e](o))})};for(var n in w)e(n);var o=function(e){c.a.subscribe(e,function(n,o){t.game_evts_ok&&t.dispatch(m[e](o))})};for(var n in m)o(n);var r=function(e){c.a.subscribe(e,function(n,o){t.dispatch(v[e](o))})};for(var n in v)r(n)},e.prototype.componentShouldUpdate=function(){return!1},e.prototype.componentWillUnmount=function(){},e.prototype.render=function(){return Object(o.createVNode)(1,"div",null,null,1,{id:"pubsub2redux-element"})},e}(X.a),zt=Object(r.b)()(Yt),qt=function(){return Object(o.createVNode)(1,"div",null,[Object(o.createComponentVNode)(2,zt),Object(o.createComponentVNode)(2,$),Object(o.createComponentVNode)(2,Ft),Object(o.createComponentVNode)(2,Ht)],4,{id:"main-layer"})};var Wt=function(){return Object(o.createVNode)(1,"div","loadingIndic",Object(o.createTextVNode)("Loading..."),2)};var Xt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(){var t=[Object(o.createComponentVNode)(2,Wt)];return Object(o.createComponentVNode)(2,J,{classes:"FULLSCRN loadingBG",speed:150,active:this.props.gameIsLoading,children:t})},e}(X.a),Zt=Object(r.b)(function(t){var e=t[G],n=t[B];return{gameIsLoading:e.self.length>0,loadStatus:n}})(Xt);var Jt=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.interval=-1,o.boxStartX=-250,o.smokeStartY=70,o.smokeStartWidth=100,o.smokeStartHeight=50,o.smokeStartOpac=1,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.stopAnim=function(){var t=document.getElementById("cannonProjectile"),e=document.getElementById("cannonSmoke"),n=this.boxStartX,o=this.smokeStartY,r=this.smokeStartWidth,i=this.smokeStartHeight,a=this.smokeStartOpac;this.interval&&window.clearInterval(this.interval),t&&e&&(t.setAttribute("x",n.toString()),e.setAttribute("y",o+"%"),e.setAttribute("width",r.toString()),e.setAttribute("height",i+"%"),e.setAttribute("opacity",a.toString()))},e.prototype.componentDidMount=function(){var t=this;c.a.subscribe(g,this.stopAnim.bind(this)),c.a.subscribe("EVT_TITLEANIM_ON",function(){t.interval=window.setInterval(function(){var e=document.getElementById("cannonProjectile"),n=document.getElementById("cannonSmoke"),o=t.boxStartX,r=t.smokeStartY,i=t.smokeStartWidth,a=t.smokeStartHeight,s=t.smokeStartOpac;if(e&&n){e.setAttribute("x",o.toString()),n.setAttribute("y",r+"%"),n.setAttribute("width",i.toString()),n.setAttribute("height",a+"%");var c=1;!function t(o,r,i,a,s,u){var l=r+160*o,p=i-.5*o,f=a+1.5*o,d=s+1*o,h=u-.008*o;requestAnimationFrame(function(){e.setAttribute("x",l.toString()),n.setAttribute("y",p+"%"),n.setAttribute("width",f.toString()),n.setAttribute("height",d+"%"),n.setAttribute("opacity",h.toString()),c<16&&t(++c,l,p,f,d,h)})}(c,o,r,i,a,s)}},3e3)}),c.a.publish("EVT_TITLEANIM_ON")},e.prototype.componentShouldUpdate=function(){return!1},e.prototype.componentWillUnmount=function(){this.stopAnim()},e.prototype.render=function(){return Object(o.createVNode)(32,"svg","FULLSCRN",[Object(o.createVNode)(1,"defs",null,Object(o.createVNode)(1,"filter",null,Object(o.createVNode)(1,"feGaussianBlur",null,null,1,{in:"SourceGraphic",stdDeviation:"25"}),2,{id:"f1"}),2),Object(o.createVNode)(1,"rect",null,null,1,{id:"cannonBody",x:"-350",y:"70%",width:"550",height:"50%",fill:"rgb(210,210,210)",filter:"url(#f1)",transform:"rotate(-35 -150 540)"}),Object(o.createVNode)(1,"rect",null,null,1,{id:"cannonSmoke",x:"160",y:"70%",width:"100",height:"50%",fill:"rgb(210,210,210)",filter:"url(#f1)",transform:"rotate(-35 -150 540)",opacity:"0",rx:"100"}),Object(o.createVNode)(1,"rect",null,null,1,{id:"cannonProjectile",x:"-250",y:"73%",width:"400",height:"43%",fill:"rgba(210,210,210,0.27)",transform:"rotate(-35 -150 540)"})],4,{id:"cannonEffectBG"})},e}(X.a);var Qt=function(){return Object(o.createComponentVNode)(2,J,{children:Object(o.createVNode)(1,"div","titleElement",Object(o.createTextVNode)("BOXGUN"),2)})},$t=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){var t=this;new Promise(Pt).then(function(e){t.node&&(t.node.textContent=e.toString())}),c.a.subscribe("GEVT_UPDATE_HISCORE",function(e,n){t.node&&(t.node.textContent=n.toString())})},e.prototype.render=function(){var t=this;return Object(o.createComponentVNode)(2,J,{classes:"FULLSCRN titleBG",children:[Object(o.createComponentVNode)(2,Jt),Object(o.createComponentVNode)(2,Qt),Object(o.createVNode)(1,"div","title-hiscore",[Object(o.createTextVNode)("High Score: "),Object(o.createVNode)(1,"span",null,Object(o.createTextVNode)("0"),2,null,null,function(e){t.node=e})],4),Object(o.createComponentVNode)(2,oe)]})},e}(X.a),te=n(92),ee=n.n(te);var ne=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.canGoBack=void 0===n.canGoBack||n.canGoBack,o.disabled=void 0!==n.disabled?n.disabled:Array.apply(null,new Array(o.props.list.length)),o.focusID=n.focusID,o.listItemHandlers=n.list.map(function(t){return t[1]}),o.max=n.list.length-1,o.state={selected:0},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){var t=function(t){var e=this,n=function(){"function"==typeof e.listItemHandlers[e.state.selected]&&e.listItemHandlers[e.state.selected].call(e)},o={Enter:n,KeyZ:n,KeyX:function(){e.canGoBack&&z.resetConstack()},ArrowUp:this.menuMoveUp.bind(this),ArrowDown:this.menuMoveDown.bind(this)};return void 0!==t&&(o=Object.assign(o,t)),k(o)}.call(this,this.props.tableExtend);z.setKeyboardEventHandler(this.focusID,gt.bind(null,t))},e.prototype.componentWillUnmount=function(){z.setKeyboardEventHandler(this.focusID)},e.prototype.menuMoveUp=function(){this.setState({selected:Math.max(0,this.state.selected-1)})},e.prototype.menuMoveDown=function(){this.setState({selected:Math.min(this.max,this.state.selected+1)})},e.prototype.render=function(){var t=this,e=t.focusID,n=this.props.list.map(function(n,r){var i,a=ee()(((i={cursorMenuItem:!0,showGoBackIcon:t.canGoBack,selected:r===t.state.selected,disabledCSS:!!t.disabled[r]}).mouseOK=!t.disabled[r],i)),s=n[0],c=function(t,e){var n=z.self;return t===n[n.length-1]?e:M}(e,t.listItemHandlers[r]);return Object(o.createVNode)(1,"div",a,s,0,{onClick:c,onTouchStart:M})});return Object(o.createVNode)(1,"div","menu",n,0,{id:this.focusID})},e}(X.a);var oe=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.items=[["Start",o.pressStart.bind(o)]],o.state={disabledItems:Array.apply(null,new Array(o.items.length))},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pressStart=function(){z.setConstack("FERNTRANSITIONARY"),c.a.publish("GEVT_RESET_GAME")},e.prototype.pressOption=function(){z.setConstack("OPTIONSOVR")},e.prototype.render=function(){return Object(o.createComponentVNode)(2,ne,{focusID:"TITLEMENU",list:this.items,canGoBack:!1,disabled:this.state.disabledItems})},e}(X.a);var re=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(){var t=[["Restart",function(){yt.paused=!1,ft.gamePaused=!1,c.a.publish("GEVT_RESET_GAME")}.bind(this)],["Return to Title",function(){yt.paused=!1,ft.gamePaused=!1,c.a.publish("GEVT_BACK_TO_TITLE")}.bind(this)]];return Object(o.createVNode)(1,"div","FULLSCRN darkenedBG",Object(o.createComponentVNode)(2,ne,{focusID:"PAUSESCRN",list:t,canGoBack:!1,tableExtend:function(){return k({KeyP:function(){yt.sceneObj&&yt.paused&&(yt.unpause(),z.setConstack("GAMELAYER"),c.a.publish(b))}})}.call(this)}),2)},e}(X.a),ie=function(){return Object(o.createVNode)(1,"div","modal",null,1,{id:"OPTIONSOVR"})};var ae=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.state={overlayText:""},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){c.a.subscribe(h,function(t,e){this.setState({overlayText:e})}.bind(this))},e.prototype.componentWillUnmount=function(){c.a.unsubscribe(h)},e.prototype.render=function(){return Object(o.createVNode)(32,"svg","FULLSCRN",[Object(o.createVNode)(1,"defs",null,Object(o.createVNode)(1,"linearGradient",null,[Object(o.createVNode)(1,"stop",null,null,1,{offset:"0%","stop-color":"rgb(0,255,100)","stop-opacity":"0.9"}),Object(o.createVNode)(1,"stop",null,null,1,{offset:"100%","stop-color":"rgb(0,185,255)","stop-opacity":"0.7"})],4,{id:"Gradient1",x1:"0",x2:"0",y1:"0",y2:"1"}),2),Object(o.createVNode)(1,"text","generalOverlayTextMajor",this.state.overlayText,0,{x:"50%",y:"50%","dominant-baseline":"middle","text-anchor":"middle",fill:"url(#Gradient1)",stroke:"rgb(0,0,0)"}),Object(o.createVNode)(1,"text","generalOverlayTextMinor",Object(o.createTextVNode)("Drag the crystal to"),2,{x:"50%",y:"60%","dominant-baseline":"middle","text-anchor":"middle",fill:"url(#Gradient1)",stroke:"rgb(0,0,0)"}),Object(o.createVNode)(1,"text","generalOverlayTextMinor",Object(o.createTextVNode)("charge the Boxgun!"),2,{x:"50%",y:"65%","dominant-baseline":"middle","text-anchor":"middle",fill:"url(#Gradient1)",stroke:"rgb(0,0,0)"})],4,{id:"GENERALOVR","data-content-length":this.state.overlayText.length})},e}(X.a);var se=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.hiscore=0,o.state={distance:"0",isNewRecord:!1},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){var t=this;new Promise(Pt).then(function(e){t.hiscore=e}),c.a.subscribe("GEVT_END_GAME",function(e,n){(n=parseInt(n,10))>t.hiscore?(t.setState({distance:n.toString(),isNewRecord:!0}),t.hiscore=n,c.a.publish("GEVT_UPDATE_HISCORE",n),new Promise(Dt.bind(null,n))):t.setState({distance:n.toString(),isNewRecord:!1}),z.setConstack("ENDGAMEOVR")})},e.prototype.componentWillUnmount=function(){c.a.unsubscribe("GEVT_END_GAME")},e.prototype.render=function(){var t=[["Play Again",function(){c.a.publish("GEVT_RESET_GAME")}.bind(this)],["Return to Title",function(){c.a.publish("GEVT_BACK_TO_TITLE")}.bind(this)]];return Object(o.createComponentVNode)(2,J,{classes:"FULLSCRN darkenedBG",children:[Object(o.createVNode)(1,"div","resultDistance",Object(o.createComponentVNode)(2,le,{bShowID:!1,strDistance:this.state.distance}),2),Object(o.createComponentVNode)(2,ne,{focusID:"ENDGAMEOVR",list:t,canGoBack:!1})]})},e}(X.a),ce=function(){return Object(o.createVNode)(32,"svg","shakefield",[Object(o.createVNode)(1,"defs",null,Object(o.createVNode)(1,"filter",null,Object(o.createVNode)(1,"feGaussianBlur",null,null,1,{in:"SourceGraphic",stdDeviation:"25"}),2,{id:"f2"}),2),Object(o.createVNode)(1,"line",null,null,1,{id:K,x1:"50%",y1:"105%",x2:"30%",y2:"50%",stroke:"rgb(40,40,40)"}),Object(o.createVNode)(32,"svg","mouseOK",[Object(o.createVNode)(1,"path","shakeglow",null,1,{d:"M6,94 6,410     94,494 410,494    494,410 494,94    410,6 94,6  Z"}),Object(o.createVNode)(1,"image",null,null,1,{width:"500",height:"500","xlink:href":"https://res.cloudinary.com/dmj8qtant/image/upload/v1561267619/boxgun/controller.png"}),Object(o.createVNode)(1,"circle","shakeglowanim",null,1,{cx:"100",cy:"100",r:"85",filter:"url(#f2)"})],4,{id:F,x:"100",y:"100"})],4)},ue=function(){return Object(o.createVNode)(1,"div","powerlevel",[Object(o.createVNode)(1,"img","pwrsymbol",null,1,{src:"https://res.cloudinary.com/dmj8qtant/image/upload/v1561267618/boxgun/pwr.png"}),Object(o.createVNode)(32,"svg",null,Object(o.createVNode)(1,"text",null,Object(o.createTextVNode)("0"),2,{id:"powerlevel",x:"94%",y:"1em","text-anchor":"end"}),2)],4)},le=function(t){var e=t.bShowID?"distspan":"",n=t.strDistance?t.strDistance:"0";return Object(o.createVNode)(1,"div","dist",[Object(o.createVNode)(1,"span",null,n,0,{id:e}),Object(o.createVNode)(1,"span","units-span",Object(o.createTextVNode)("m"),2)],4)};var pe=1e4,fe=pe,de=!1,he=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.startTime=Date.now(),o.state={timeLeft:pe},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){c.a.subscribe(y,function(t,e){de=ft.fired=ft.zeroTime=ft.timerStarted=!1,this.setState({timeLeft:pe})}.bind(this)),c.a.subscribe(b,function(t,e){ft.timerStarted=!0,kt.acceptingCharge=!0,this.startTime=Date.now(),this.countDown()}.bind(this))},e.prototype.componentDidUpdate=function(){ft.timerStarted&&this.countDown()},e.prototype.countDown=function(){var t=this;if(!ft.fired)if(ft.gamePaused)fe=this.state.timeLeft,ft.timerStarted=!1,kt.acceptingCharge=!1,de=!0;else if(this.state&&this.state.timeLeft>0){var e=de?fe:pe;requestAnimationFrame(function(){t.setState({timeLeft:e-Math.min(e,Date.now()-t.startTime)})})}else this.state&&this.state.timeLeft<=0&&!ft.zeroTime&&(ft.zeroTime=!0,kt.acceptingCharge=!1,c.a.publish("GEVT_END_GAME",0))},e.prototype.render=function(){var t,e=ee()(((t={}).timer=!0,t.bigTime=this.state.timeLeft<3e3,t.redTime=this.state.timeLeft<1e3,t.zeroTime=0==this.state.timeLeft,t));return Object(o.createVNode)(32,"svg",e,Object(o.createVNode)(1,"text",null,[Object(o.createTextVNode)("0:"),(this.state.timeLeft/1e3).toFixed(3)],0,{id:"timer",y:"1em"}),2)},e}(X.a);var be=Object(i.createStore)(function(t,e){var n,o,r,i;switch(e.type){case u:return W;case l:return Object.assign({},t,((n={})[U]=e.payload,n));case p:return Object.assign({},t,((o={})[G]=t[G].setTaskArray(e.payload1,e.payload2),o));case f:return Object.assign({},t,((r={})[B]=t[G].getUpdatedStatus(e.payload1,e.payload2),r));case d:return Object.assign({},t,((i={})[G]=t[G].clearAll(),i));default:return t}},W,Object(a.composeWithDevTools)(i.applyMiddleware.apply(void 0,[])));Object(o.render)(Object(o.createComponentVNode)(2,r.a,{store:be,children:Object(o.createComponentVNode)(2,qt)}),document.getElementById("app"))}});
//# sourceMappingURL=main.a87517edf7c6c39b612d.js.map